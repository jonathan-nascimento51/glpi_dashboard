# ü§ù Guia de Contribui√ß√£o - GLPI Dashboard

Obrigado por seu interesse em contribuir com o GLPI Dashboard! Este documento fornece diretrizes para contribui√ß√µes efetivas e colabora√ß√£o produtiva.

## üìã √çndice

- [C√≥digo de Conduta](#c√≥digo-de-conduta)
- [Como Contribuir](#como-contribuir)
- [Configura√ß√£o do Ambiente](#configura√ß√£o-do-ambiente)
- [Padr√µes de Desenvolvimento](#padr√µes-de-desenvolvimento)
- [Processo de Pull Request](#processo-de-pull-request)
- [Reportando Bugs](#reportando-bugs)
- [Sugerindo Funcionalidades](#sugerindo-funcionalidades)
- [Documenta√ß√£o](#documenta√ß√£o)

## ü§ù C√≥digo de Conduta

Este projeto adere ao [Contributor Covenant](https://www.contributor-covenant.org/). Ao participar, voc√™ concorda em manter um ambiente respeitoso e inclusivo.

### Comportamentos Esperados:
- Uso de linguagem acolhedora e inclusiva
- Respeito por diferentes pontos de vista
- Aceita√ß√£o construtiva de cr√≠ticas
- Foco no que √© melhor para a comunidade

## üöÄ Como Contribuir

### Tipos de Contribui√ß√£o

1. **üêõ Corre√ß√£o de Bugs**
2. **‚ú® Novas Funcionalidades**
3. **üìö Documenta√ß√£o**
4. **üß™ Testes**
5. **üé® Melhorias de UI/UX**
6. **‚ö° Otimiza√ß√µes de Performance**

### Fluxo de Contribui√ß√£o

1. **Fork** o reposit√≥rio
2. **Clone** seu fork localmente
3. **Crie** uma branch para sua contribui√ß√£o
4. **Desenvolva** seguindo os padr√µes
5. **Teste** suas altera√ß√µes
6. **Commit** com mensagens descritivas
7. **Push** para seu fork
8. **Abra** um Pull Request

## üõ†Ô∏è Configura√ß√£o do Ambiente

### Pr√©-requisitos

- **Python 3.9+**
- **Node.js 18+**
- **Git**
- **Redis** (opcional, para desenvolvimento)
- **GLPI 10.0+** (para testes de integra√ß√£o)

### Setup Inicial

```bash
# 1. Fork e clone o reposit√≥rio
git clone https://github.com/SEU_USUARIO/glpi_dashboard.git
cd glpi_dashboard

# 2. Configure o upstream
git remote add upstream https://github.com/ORIGINAL_OWNER/glpi_dashboard.git

# 3. Configure o backend
cd backend
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate
pip install -r requirements.txt
pip install -r requirements-dev.txt

# 4. Configure o frontend
cd ../frontend
npm install

# 5. Configure pre-commit hooks
cd ..
pre-commit install

# 6. Configure vari√°veis de ambiente
cp backend/.env.example backend/.env
# Edite backend/.env com suas configura√ß√µes
cd backend
python -m venv venv
source venv/bin/activate  # Linux/Mac
# ou
venv\Scripts\activate     # Windows
pip install -r requirements.txt

# Frontend (Node.js)
cd frontend
npm install
```

### 3. Mantenha seu Fork Atualizado

```bash
git fetch upstream
git checkout main
git merge upstream/main
git push origin main
```

## üåø Conven√ß√µes de Branch

### Nomenclatura de Branches

Use o seguinte padr√£o para nomear suas branches:

```
<tipo>/<descri√ß√£o-curta>
```

**Tipos de Branch:**

- `feature/` - Novas funcionalidades
- `bugfix/` - Corre√ß√£o de bugs
- `hotfix/` - Corre√ß√µes urgentes para produ√ß√£o
- `docs/` - Mudan√ßas na documenta√ß√£o
- `refactor/` - Refatora√ß√£o de c√≥digo
- `test/` - Adi√ß√£o ou corre√ß√£o de testes
- `chore/` - Tarefas de manuten√ß√£o

**Exemplos:**

```bash
feature/dashboard-filters
bugfix/memory-leak-charts
hotfix/security-vulnerability
docs/api-documentation
refactor/service-layer
test/integration-tests
chore/update-dependencies
```

### Criando uma Branch

```bash
# Certifique-se de estar na main atualizada
git checkout main
git pull upstream main

# Crie e mude para a nova branch
git checkout -b feature/nova-funcionalidade
```

## üí¨ Conven√ß√µes de Commit

### Formato de Mensagem

Use o formato **Conventional Commits**:

```
<tipo>[escopo opcional]: <descri√ß√£o>

[corpo opcional]

[rodap√© opcional]
```

### Tipos de Commit

- `feat`: Nova funcionalidade
- `fix`: Corre√ß√£o de bug
- `docs`: Mudan√ßas na documenta√ß√£o
- `style`: Formata√ß√£o, ponto e v√≠rgula ausente, etc
- `refactor`: Refatora√ß√£o de c√≥digo
- `test`: Adi√ß√£o ou corre√ß√£o de testes
- `chore`: Tarefas de manuten√ß√£o
- `perf`: Melhoria de performance
- `ci`: Mudan√ßas no CI/CD
- `build`: Mudan√ßas no sistema de build
- `revert`: Revers√£o de commit anterior

### Exemplos de Commits

```bash
# Funcionalidade
feat(dashboard): adicionar filtros de data para m√©tricas

# Corre√ß√£o de bug
fix(api): corrigir vazamento de mem√≥ria no cache Redis

# Documenta√ß√£o
docs: atualizar README com instru√ß√µes de instala√ß√£o

# Teste
test(service): adicionar testes unit√°rios para GLPIService

# Refatora√ß√£o
refactor(components): extrair l√≥gica de filtros para hook customizado

# Breaking change
feat(api)!: alterar formato de resposta da API de m√©tricas

BREAKING CHANGE: O campo 'data' agora retorna objeto em vez de array
```

### Boas Pr√°ticas de Commit

- ‚úÖ **Commits at√¥micos**: Um commit = uma mudan√ßa l√≥gica
- ‚úÖ **Mensagens descritivas**: Explique o "o qu√™" e "por qu√™"
- ‚úÖ **Presente imperativo**: "adicionar" n√£o "adicionado"
- ‚úÖ **Primeira linha ‚â§ 50 caracteres**
- ‚úÖ **Corpo detalhado quando necess√°rio**
- ‚ùå **Evite commits gen√©ricos**: "fix", "update", "changes"

## ‚öôÔ∏è Configura√ß√£o do Ambiente

### Pr√©-requisitos

- Python 3.11+
- Node.js 18+
- Redis (para testes de integra√ß√£o)
- Git

### Configura√ß√£o Completa

```bash
# 1. Clone e configure
git clone https://github.com/SEU_USERNAME/glpi_dashboard.git
cd glpi_dashboard

# 2. Configure pre-commit hooks
pip install pre-commit
pre-commit install

# 3. Backend
cd backend
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows
pip install -r requirements.txt
pip install -r requirements-dev.txt  # Se existir

# 4. Frontend
cd ../frontend
npm install

# 5. Vari√°veis de ambiente
cp .env.example .env
# Edite .env com suas configura√ß√µes
```

### Ferramentas de Desenvolvimento

```bash
# Instalar ferramentas de qualidade de c√≥digo
pip install black isort flake8 pytest pytest-cov bandit safety
npm install -g prettier eslint
```

## üß™ Executando Testes

### Backend (Python)

```bash
cd backend

# Testes unit√°rios
pytest tests/unit/ -v

# Testes de integra√ß√£o
pytest tests/integration/ -v

# Todos os testes
pytest -v

# Com cobertura
pytest --cov=. --cov-report=html --cov-report=term-missing

# Testes espec√≠ficos
pytest tests/unit/test_glpi_service.py::TestGLPIService::test_get_tickets -v
```

### Frontend (TypeScript/React)

```bash
cd frontend

# Todos os testes
npm test

# Com cobertura
npm run test:coverage

# Modo watch
npm run test:watch

# Testes espec√≠ficos
npm test -- --testNamePattern="Dashboard"
```

### Verifica√ß√µes de Qualidade

```bash
# Backend
flake8 backend/
black --check backend/
isort --check-only backend/
bandit -r backend/

# Frontend
npm run lint
npm run format:check
npm run type-check
```

### Executar Tudo

```bash
# Com pre-commit (recomendado)
pre-commit run --all-files

# Ou manualmente
./scripts/run-all-tests.sh  # Se existir
```

## üì§ Enviando Pull Requests

### Antes de Enviar

1. ‚úÖ **Testes passando**: Todos os testes devem passar
2. ‚úÖ **Linting limpo**: Sem erros de linting
3. ‚úÖ **Cobertura mantida**: N√£o diminuir cobertura significativamente
4. ‚úÖ **Documenta√ß√£o atualizada**: Se necess√°rio
5. ‚úÖ **Commits organizados**: Squash se necess√°rio

### Processo de Envio

```bash
# 1. Finalize suas mudan√ßas
git add .
git commit -m "feat(dashboard): adicionar filtros de data"

# 2. Atualize com a main
git fetch upstream
git rebase upstream/main

# 3. Execute testes finais
pytest && npm test

# 4. Push para seu fork
git push origin feature/nova-funcionalidade

# 5. Abra PR no GitHub
```

### Template de PR

Use o template fornecido e preencha:

- üìã **Descri√ß√£o**: O que foi implementado
- üîÑ **Tipo de mudan√ßa**: Feature, bugfix, etc.
- üß™ **Como testar**: Passos para validar
- ‚úÖ **Checklist**: Marque todos os itens aplic√°veis

## ‚úÖ Checklist de Revis√£o de C√≥digo

### Para o Autor

**Funcionalidade:**
- [ ] A funcionalidade funciona conforme especificado
- [ ] Casos edge foram considerados
- [ ] Performance n√£o foi degradada
- [ ] N√£o h√° regress√µes

**C√≥digo:**
- [ ] C√≥digo limpo e leg√≠vel
- [ ] Nomes de vari√°veis/fun√ß√µes descritivos
- [ ] Fun√ß√µes pequenas e focadas
- [ ] Sem c√≥digo duplicado
- [ ] Coment√°rios onde necess√°rio

**Testes:**
- [ ] Testes unit√°rios adicionados/atualizados
- [ ] Testes de integra√ß√£o quando aplic√°vel
- [ ] Cobertura de testes mantida (>80%)
- [ ] Testes passando localmente

**Logs e Monitoramento:**
- [ ] Logs apropriados adicionados
- [ ] N√≠veis de log corretos (DEBUG, INFO, WARNING, ERROR)
- [ ] Informa√ß√µes sens√≠veis n√£o logadas
- [ ] M√©tricas de performance quando relevante

**Valida√ß√µes e Tratamento de Erro:**
- [ ] Valida√ß√£o de entrada implementada
- [ ] Tratamento de erro apropriado
- [ ] Mensagens de erro informativas
- [ ] Fallbacks para casos de falha
- [ ] Timeouts configurados adequadamente

**Seguran√ßa:**
- [ ] Sem vazamento de informa√ß√µes sens√≠veis
- [ ] Valida√ß√£o de autoriza√ß√£o quando necess√°ria
- [ ] Sanitiza√ß√£o de entrada
- [ ] Sem vulnerabilidades √≥bvias

**Documenta√ß√£o:**
- [ ] Docstrings atualizadas
- [ ] README atualizado se necess√°rio
- [ ] Coment√°rios de c√≥digo adequados
- [ ] Documenta√ß√£o de API atualizada

### Para o Revisor

**Revis√£o de C√≥digo:**
- [ ] L√≥gica de neg√≥cio est√° correta
- [ ] Arquitetura e design apropriados
- [ ] Padr√µes do projeto seguidos
- [ ] Sem code smells √≥bvios

**Testes e Qualidade:**
- [ ] Testes cobrem cen√°rios importantes
- [ ] Qualidade dos testes √© adequada
- [ ] CI/CD pipeline passou
- [ ] Cobertura de c√≥digo aceit√°vel

**Performance e Escalabilidade:**
- [ ] Sem problemas de performance √≥bvios
- [ ] Uso eficiente de recursos
- [ ] Consultas de banco otimizadas
- [ ] Cache utilizado apropriadamente

**Integra√ß√£o:**
- [ ] Compatibilidade com c√≥digo existente
- [ ] APIs mant√™m retrocompatibilidade
- [ ] Depend√™ncias justificadas
- [ ] Configura√ß√£o adequada

## üìè Padr√µes de C√≥digo

### Backend (Python)

```python
# Imports organizados
from __future__ import annotations

import os
import sys
from typing import Any, Dict, List, Optional

from flask import Flask, request
from redis import Redis

from config.settings import active_config
from services.glpi_service import GLPIService

# Docstrings
def get_dashboard_metrics(date_filter: Optional[str] = None) -> Dict[str, Any]:
    """Obt√©m m√©tricas do dashboard com filtro de data opcional.
    
    Args:
        date_filter: Filtro de data no formato 'YYYY-MM-DD'
        
    Returns:
        Dict contendo m√©tricas do dashboard
        
    Raises:
        ValueError: Se date_filter tem formato inv√°lido
        GLPIServiceError: Se falha na comunica√ß√£o com GLPI
    """
    pass

# Type hints
class GLPIService:
    def __init__(self, base_url: str, app_token: str, user_token: str) -> None:
        self.base_url = base_url
        self.app_token = app_token
        self.user_token = user_token
        self._session_token: Optional[str] = None
```

### Frontend (TypeScript/React)

```typescript
// Interfaces bem definidas
interface DashboardMetrics {
  totalTickets: number;
  openTickets: number;
  closedTickets: number;
  trends: TrendData[];
}

// Componentes funcionais com tipos
interface DashboardProps {
  dateFilter?: string;
  onFilterChange: (filter: string) => void;
}

const Dashboard: React.FC<DashboardProps> = ({ dateFilter, onFilterChange }) => {
  const [metrics, setMetrics] = useState<DashboardMetrics | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  // Hooks customizados
  const { data, isLoading, error: apiError } = useDashboardMetrics(dateFilter);

  return (
    <div className="dashboard">
      {/* JSX limpo e organizado */}
    </div>
  );
};

export default Dashboard;
```

### Estrutura de Arquivos

```
backend/
‚îú‚îÄ‚îÄ api/           # Endpoints da API
‚îú‚îÄ‚îÄ config/        # Configura√ß√µes
‚îú‚îÄ‚îÄ services/      # L√≥gica de neg√≥cio
‚îú‚îÄ‚îÄ utils/         # Utilit√°rios
‚îú‚îÄ‚îÄ tests/         # Testes
‚îî‚îÄ‚îÄ schemas/       # Schemas de valida√ß√£o

frontend/src/
‚îú‚îÄ‚îÄ components/    # Componentes React
‚îú‚îÄ‚îÄ hooks/         # Hooks customizados
‚îú‚îÄ‚îÄ services/      # Servi√ßos de API
‚îú‚îÄ‚îÄ types/         # Defini√ß√µes de tipos
‚îú‚îÄ‚îÄ utils/         # Utilit√°rios
‚îî‚îÄ‚îÄ __tests__/     # Testes
```

## üÜò Obtendo Ajuda

- üìñ **Documenta√ß√£o**: Consulte o README e docs/
- üí¨ **Discuss√µes**: Use GitHub Discussions
- üêõ **Issues**: Reporte bugs com template
- üìß **Email**: Para quest√µes sens√≠veis

## üìù Licen√ßa

Ao contribuir, voc√™ concorda que suas contribui√ß√µes ser√£o licenciadas sob a mesma licen√ßa do projeto.

---

**Obrigado por contribuir! üéâ**

Sua contribui√ß√£o ajuda a tornar o GLPI Dashboard melhor para todos!