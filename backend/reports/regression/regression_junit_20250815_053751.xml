<?xml version="1.0" encoding="utf-8"?><testsuites><testsuite name="pytest" errors="1" failures="6" skipped="0" tests="14" time="111.139" timestamp="2025-08-15T05:37:54.207397" hostname="CC-PC-WS1655948"><testcase classname="tests.regression.test_api_regression.TestAPIRegressionBaseline" name="test_metrics_endpoint_structure_regression" time="4.144"><failure message="AssertionError: assert 'timestamp' in {'data': {'niveis': {'n1': {'novos': 3, 'pendentes': 4, 'progresso': 3, 'resolvidos': 8, ...}, 'n2': {'novos': 6, 'pendentes': 2, 'progresso': 4, 'resolvidos': 17, ...}, 'n3': {'novos': 6, 'pendentes': 2, 'progresso': 5, 'resolvidos': 12, ...}, 'n4': {'novos': 5, 'pendentes': 3, 'progresso': 2, 'resolvidos': 10, ...}}, 'novos': 25, 'pendentes': 11, 'progresso': 18, ...}, 'success': True}">tests\regression\test_api_regression.py:206: in test_metrics_endpoint_structure_regression
    assert 'timestamp' in data
E   AssertionError: assert 'timestamp' in {'data': {'niveis': {'n1': {'novos': 3, 'pendentes': 4, 'progresso': 3, 'resolvidos': 8, ...}, 'n2': {'novos': 6, 'pendentes': 2, 'progresso': 4, 'resolvidos': 17, ...}, 'n3': {'novos': 6, 'pendentes': 2, 'progresso': 5, 'resolvidos': 12, ...}, 'n4': {'novos': 5, 'pendentes': 3, 'progresso': 2, 'resolvidos': 10, ...}}, 'novos': 25, 'pendentes': 11, 'progresso': 18, ...}, 'success': True}</failure></testcase><testcase classname="tests.regression.test_api_regression.TestAPIRegressionBaseline" name="test_simple_metrics_endpoint_structure_regression" time="4.109"><failure message="AssertionError: assert 'cards' in {'data': {'cards': [{'description': 'Tickets criados hoje', 'title': 'Novos Tickets', 'trend': 5.2, 'trend_direction': 'up', ...}, {'description': 'Tickets fechados hoje', 'title': 'Tickets Resolvidos', 'trend': 8.1, 'trend_direction': 'up', ...}, {'description': 'Aguardando resposta', 'title': 'Pendentes', 'trend': -2.3, 'trend_direction': 'down', ...}, {'description': 'Sendo trabalhados', 'title': 'Em Progresso', 'trend': 3.4, 'trend_direction': 'up', ...}], 'niveis': {'geral': {'novos': 15, 'pendentes': 8, 'progresso': 12, 'resolvidos': 45, ...}, 'n1': {'novos': 5, 'pendentes': 2, 'progresso': 3, 'resolvidos': 10, ...}, 'n2': {'novos': 4, 'pendentes': 3, 'progresso': 4, 'resolvidos': 15, ...}, 'n3': {'novos': 3, 'pendentes': 2, 'progresso': 3, 'resolvidos': 12, ...}, ...}, 'tendencias': {'novos': '+5.2%', 'pendentes': '-2.3%', 'progresso': '+3.4%', 'resolvidos': '+8.1%'}, 'total': 80}, 'success': True}">tests\regression\test_api_regression.py:252: in test_simple_metrics_endpoint_structure_regression
    assert 'cards' in data
E   AssertionError: assert 'cards' in {'data': {'cards': [{'description': 'Tickets criados hoje', 'title': 'Novos Tickets', 'trend': 5.2, 'trend_direction': 'up', ...}, {'description': 'Tickets fechados hoje', 'title': 'Tickets Resolvidos', 'trend': 8.1, 'trend_direction': 'up', ...}, {'description': 'Aguardando resposta', 'title': 'Pendentes', 'trend': -2.3, 'trend_direction': 'down', ...}, {'description': 'Sendo trabalhados', 'title': 'Em Progresso', 'trend': 3.4, 'trend_direction': 'up', ...}], 'niveis': {'geral': {'novos': 15, 'pendentes': 8, 'progresso': 12, 'resolvidos': 45, ...}, 'n1': {'novos': 5, 'pendentes': 2, 'progresso': 3, 'resolvidos': 10, ...}, 'n2': {'novos': 4, 'pendentes': 3, 'progresso': 4, 'resolvidos': 15, ...}, 'n3': {'novos': 3, 'pendentes': 2, 'progresso': 3, 'resolvidos': 12, ...}, ...}, 'tendencias': {'novos': '+5.2%', 'pendentes': '-2.3%', 'progresso': '+3.4%', 'resolvidos': '+8.1%'}, 'total': 80}, 'success': True}</failure></testcase><testcase classname="tests.regression.test_api_regression.TestAPIRegressionBaseline" name="test_ranking_endpoint_structure_regression" time="4.102"><failure message="AttributeError: &lt;class 'services.api_service.APIService'&gt; does not have the attribute 'get_technician_ranking'">C:\Program Files\Python312\Lib\unittest\mock.py:1384: in patched
    with self.decoration_helper(patched,
C:\Program Files\Python312\Lib\contextlib.py:137: in __enter__
    return next(self.gen)
C:\Program Files\Python312\Lib\unittest\mock.py:1366: in decoration_helper
    arg = exit_stack.enter_context(patching)
C:\Program Files\Python312\Lib\contextlib.py:526: in enter_context
    result = _enter(cm)
C:\Program Files\Python312\Lib\unittest\mock.py:1455: in __enter__
    original, local = self.get_original()
C:\Program Files\Python312\Lib\unittest\mock.py:1428: in get_original
    raise AttributeError(
E   AttributeError: &lt;class 'services.api_service.APIService'&gt; does not have the attribute 'get_technician_ranking'</failure></testcase><testcase classname="tests.regression.test_api_regression.TestAPIRegressionBaseline" name="test_status_endpoint_structure_regression" time="4.111"><failure message="AttributeError: &lt;class 'services.glpi_service.GLPIService'&gt; does not have the attribute 'check_connection'">C:\Program Files\Python312\Lib\unittest\mock.py:1384: in patched
    with self.decoration_helper(patched,
C:\Program Files\Python312\Lib\contextlib.py:137: in __enter__
    return next(self.gen)
C:\Program Files\Python312\Lib\unittest\mock.py:1366: in decoration_helper
    arg = exit_stack.enter_context(patching)
C:\Program Files\Python312\Lib\contextlib.py:526: in enter_context
    result = _enter(cm)
C:\Program Files\Python312\Lib\unittest\mock.py:1455: in __enter__
    original, local = self.get_original()
C:\Program Files\Python312\Lib\unittest\mock.py:1428: in get_original
    raise AttributeError(
E   AttributeError: &lt;class 'services.glpi_service.GLPIService'&gt; does not have the attribute 'check_connection'</failure></testcase><testcase classname="tests.regression.test_api_regression.TestAPIRegressionBaseline" name="test_health_endpoint_structure_regression" time="4.141" /><testcase classname="tests.regression.test_api_regression.TestAPIRegressionBaseline" name="test_metrics_with_date_filters_regression" time="52.204"><failure message="assert 503 == 200&#10; +  where 503 = &lt;WrapperTestResponse streamed [503 SERVICE UNAVAILABLE]&gt;.status_code">tests\regression\test_api_regression.py:349: in test_metrics_with_date_filters_regression
    assert response.status_code == 200
E   assert 503 == 200
E    +  where 503 = &lt;WrapperTestResponse streamed [503 SERVICE UNAVAILABLE]&gt;.status_code</failure></testcase><testcase classname="tests.regression.test_api_regression.TestAPIRegressionBaseline" name="test_invalid_date_format_regression" time="4.133" /><testcase classname="tests.regression.test_api_regression.TestAPIRegressionBaseline" name="test_nonexistent_endpoint_regression" time="4.101" /><testcase classname="tests.regression.test_api_regression.TestAPIRegressionBaseline" name="test_service_error_handling_regression" time="4.114"><failure message="assert 200 == 500&#10; +  where 200 = &lt;WrapperTestResponse streamed [200 OK]&gt;.status_code">tests\regression\test_api_regression.py:380: in test_service_error_handling_regression
    assert response.status_code == 500
E   assert 200 == 500
E    +  where 200 = &lt;WrapperTestResponse streamed [200 OK]&gt;.status_code</failure></testcase><testcase classname="tests.regression.test_api_regression.TestAPIRegressionBaseline" name="test_response_time_regression" time="4.120" /><testcase classname="tests.regression.test_api_regression.TestAPIRegressionBaseline" name="test_cors_headers_regression" time="4.146" /><testcase classname="tests.regression.test_api_regression.TestAPIRegressionBaseline" name="test_content_type_regression" time="4.093" /><testcase classname="tests.regression.test_api_regression.TestAPIPerformanceRegression" name="test_concurrent_requests_regression" time="4.099"><error message="failed on teardown with &quot;LookupError: &lt;ContextVar name='flask.request_ctx' at 0x000001F77F113D30&gt;&quot;">..\..\..\AppData\Roaming\Python\Python312\site-packages\flask\ctx.py:410: in pop
    self.app.do_teardown_request(exc)
..\..\..\AppData\Roaming\Python\Python312\site-packages\flask\app.py:1315: in do_teardown_request
    for name in chain(request.blueprints, (None,)):
..\..\..\AppData\Roaming\Python\Python312\site-packages\werkzeug\local.py:318: in __get__
    obj = instance._get_current_object()
..\..\..\AppData\Roaming\Python\Python312\site-packages\werkzeug\local.py:519: in _get_current_object
    raise RuntimeError(unbound_message) from None
E   RuntimeError: Working outside of request context.
E
E   This typically means that you attempted to use functionality that needed
E   an active HTTP request. Consult the documentation on testing for
E   information about how to avoid this problem.

During handling of the above exception, another exception occurred:
tests\regression\test_api_regression.py:31: in client
    with app.test_client() as client:
..\..\..\AppData\Roaming\Python\Python312\site-packages\flask\testing.py:262: in __exit__
    self._context_stack.close()
C:\Program Files\Python312\Lib\contextlib.py:618: in close
    self.__exit__(None, None, None)
C:\Program Files\Python312\Lib\contextlib.py:610: in __exit__
    raise exc_details[1]
C:\Program Files\Python312\Lib\contextlib.py:595: in __exit__
    if cb(*exc_details):
..\..\..\AppData\Roaming\Python\Python312\site-packages\flask\ctx.py:443: in __exit__
    self.pop(exc_value)
..\..\..\AppData\Roaming\Python\Python312\site-packages\flask\ctx.py:416: in pop
    ctx = _cv_request.get()
E   LookupError: &lt;ContextVar name='flask.request_ctx' at 0x000001F77F113D30&gt;</error></testcase></testsuite></testsuites>
