# Configuração do cron para mapeamento GLPI
# Executa toda segunda-feira às 02:00 (horário do container)
# Formato: minuto hora dia_do_mes mes dia_da_semana comando

# Mapeamento semanal completo
0 2 * * 1 cd /app && python -m glpi_mapping dump --out /app/lookups --detect-levels >> /var/log/cron.log 2>&1

# Verificação de saúde diária (opcional)
0 6 * * * cd /app && python -m glpi_mapping test-connection >> /var/log/cron.log 2>&1

# Limpeza de logs antigos (mensal)
0 3 1 * * find /app/logs -name "*.log" -mtime +30 -delete >> /var/log/cron.log 2>&1

# Linha em branco necessária no final do arquivo cron